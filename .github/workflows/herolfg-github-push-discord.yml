name: HeroLFG Push Discord Notif
on: [push]
jobs:
  Share-Push-With-Discord-Server:
    runs-on: ubuntu-latest
    steps:
      - name: Dump GitHub context
        id: github_context_step
        run: echo '${{ toJSON(github) }}'
      - uses: actions/checkout@v2
      - run: echo "using https://github.com/marketplace/actions/get-diff-action"
      - uses: technote-space/get-diff-action@v6
        with:
          PATTERNS: |
            !.github
      - run: echo "using https://github.com/marketplace/actions/actions-for-discord"
      - name: Discord Notification actions-for-discord
        env:
          DISCORD_WEBHOOK: ${{ secrets.DISCORD_HEROLFG_PLAYGROUND_WEBHOOK }}
          # DISCORD_USERNAME: 'Page Push Status'
          # DISCORD_AVATAR: 'https://avatars.githubusercontent.com/u/5564129?v=4'
          DISCORD_AVATAR: 'https://avatars.githubusercontent.com/u/9197206?v=4'
          DISCORD_EMBEDS: '[{"title":"Rebuilding https://herolfg.com"},{"title":"${{ github.event.head_commit.message }}"},{"title":"Wait for build status..."}]'
        uses: Ilshidur/action-discord@08d9328877d6954120eef2b07abbc79249bb6210
        if: env.GIT_DIF
